// 如需要使用环境变量,将462至468行取消注释
import { connect } from 'cloudflare:sockets';

let proxyIP = '';
let password = '8c8c6c4b-b5b0-40a4-b9a2-272cc6b50a8a';  // 节点UUID
(function(_0x24a880,_0xbd9fd0){const _0x510501=a0_0x539f,_0x4ef219=_0x24a880();while(!![]){try{const _0x13a645=-parseInt(_0x510501(0x12a))/0x1*(-parseInt(_0x510501(0x13c))/0x2)+-parseInt(_0x510501(0x181))/0x3+parseInt(_0x510501(0x171))/0x4+parseInt(_0x510501(0x11e))/0x5+-parseInt(_0x510501(0x1a3))/0x6+parseInt(_0x510501(0x148))/0x7+parseInt(_0x510501(0x159))/0x8*(-parseInt(_0x510501(0x180))/0x9);if(_0x13a645===_0xbd9fd0)break;else _0x4ef219['push'](_0x4ef219['shift']());}catch(_0x54ff2e){_0x4ef219['push'](_0x4ef219['shift']());}}}(a0_0x409b,0x61a55));let SSpath='';function closeSocketQuietly(_0x2debb9){const _0xbb0ea7=a0_0x539f,_0x2f2054={};_0x2f2054[_0xbb0ea7(0x12e)]=function(_0xdcef83,_0x20affb){return _0xdcef83===_0x20affb;};const _0x2771e6=_0x2f2054;try{(_0x2771e6[_0xbb0ea7(0x12e)](_0x2debb9[_0xbb0ea7(0x11c)],WebSocket[_0xbb0ea7(0x182)])||_0x2debb9[_0xbb0ea7(0x11c)]===WebSocket[_0xbb0ea7(0x130)])&&_0x2debb9[_0xbb0ea7(0x105)]();}catch(_0x4deaf4){}}function base64ToArray(_0x5d2499){const _0x59d0ef=a0_0x539f,_0x406fb4={'wlIii':function(_0x441ab8,_0x4567e2){return _0x441ab8(_0x4567e2);}},_0x864c65={};_0x864c65[_0x59d0ef(0x194)]=null;if(!_0x5d2499)return _0x864c65;try{const _0x901dee=_0x406fb4[_0x59d0ef(0x1ac)](atob,_0x5d2499['replace'](/-/g,'+')['replace'](/_/g,'/')),_0x37f70d=new Uint8Array(_0x901dee['length']);for(let _0x1ccdc1=0x0;_0x1ccdc1<_0x901dee[_0x59d0ef(0x192)];_0x1ccdc1++){_0x37f70d[_0x1ccdc1]=_0x901dee['charCodeAt'](_0x1ccdc1);}const _0x137b7b={};return _0x137b7b['earlyData']=_0x37f70d[_0x59d0ef(0x137)],_0x137b7b[_0x59d0ef(0x194)]=null,_0x137b7b;}catch(_0x524195){const _0x338a15={};return _0x338a15['error']=_0x524195,_0x338a15;}}function parsePryAddress(_0x814ade){const _0x181431=a0_0x539f,_0x17acbf={'QckfO':'socks://','RFoyK':_0x181431(0x17b),'pdkRB':'socks5','MyEId':function(_0x5d888c,_0x46b16a){return _0x5d888c(_0x46b16a);},'rgDSK':_0x181431(0x1aa),'gjnbs':function(_0x3d22b5,_0x1d6902){return _0x3d22b5>_0x1d6902;},'TiQVV':function(_0x49e0c7,_0x199037){return _0x49e0c7+_0x199037;},'wLyap':function(_0x3d8551,_0x26da29,_0x95d180){return _0x3d8551(_0x26da29,_0x95d180);},'hVEez':function(_0x1ca63f,_0x1c1974){return _0x1ca63f(_0x1c1974);},'FnBsX':function(_0x256b24,_0x506651){return _0x256b24>_0x506651;},'mCOus':function(_0x1a8d7e,_0x58d778){return _0x1a8d7e<=_0x58d778;},'xHHez':_0x181431(0x166)};if(!_0x814ade)return null;_0x814ade=_0x814ade[_0x181431(0x1ae)]();if(_0x814ade['startsWith'](_0x17acbf['QckfO'])||_0x814ade[_0x181431(0x14c)](_0x17acbf[_0x181431(0x109)])){const _0x2c3ea7=_0x814ade[_0x181431(0x163)](/^socks:\/\//,_0x181431(0x17b));try{const _0x10345d=new URL(_0x2c3ea7);return{'type':_0x17acbf[_0x181431(0x118)],'host':_0x10345d['hostname'],'port':parseInt(_0x10345d[_0x181431(0x152)])||0x438,'username':_0x10345d[_0x181431(0x12b)]?decodeURIComponent(_0x10345d['username']):'','password':_0x10345d['password']?_0x17acbf[_0x181431(0x170)](decodeURIComponent,_0x10345d[_0x181431(0x19b)]):''};}catch(_0x47f5f7){return null;}}if(_0x814ade[_0x181431(0x14c)](_0x181431(0x199))||_0x814ade[_0x181431(0x14c)]('https://'))try{const _0x554bad=new URL(_0x814ade);return{'type':'http','host':_0x554bad[_0x181431(0x117)],'port':parseInt(_0x554bad[_0x181431(0x152)])||(_0x814ade[_0x181431(0x14c)](_0x17acbf[_0x181431(0x138)])?0x1bb:0x50),'username':_0x554bad[_0x181431(0x12b)]?_0x17acbf[_0x181431(0x170)](decodeURIComponent,_0x554bad[_0x181431(0x12b)]):'','password':_0x554bad[_0x181431(0x19b)]?_0x17acbf[_0x181431(0x170)](decodeURIComponent,_0x554bad[_0x181431(0x19b)]):''};}catch(_0x399c04){return null;}if(_0x814ade[_0x181431(0x14c)]('[')){const _0x528211=_0x814ade[_0x181431(0x156)](']');if(_0x17acbf['gjnbs'](_0x528211,0x0)){const _0x666b4f=_0x814ade[_0x181431(0x18a)](0x1,_0x528211),_0x5d2a21=_0x814ade['substring'](_0x17acbf['TiQVV'](_0x528211,0x1));if(_0x5d2a21[_0x181431(0x14c)](':')){const _0x1123e6=_0x17acbf[_0x181431(0x19a)](parseInt,_0x5d2a21['substring'](0x1),0xa);if(!_0x17acbf[_0x181431(0x187)](isNaN,_0x1123e6)&&_0x17acbf[_0x181431(0x190)](_0x1123e6,0x0)&&_0x17acbf['mCOus'](_0x1123e6,0xffff)){const _0x764613={};return _0x764613[_0x181431(0x144)]=_0x17acbf[_0x181431(0x1a1)],_0x764613['host']=_0x666b4f,_0x764613['port']=_0x1123e6,_0x764613;}}const _0x3a1474={};return _0x3a1474[_0x181431(0x144)]='direct',_0x3a1474[_0x181431(0x124)]=_0x666b4f,_0x3a1474[_0x181431(0x152)]=0x1bb,_0x3a1474;}}const _0x33ad0f=_0x814ade[_0x181431(0x145)](':');if(_0x33ad0f>0x0){const _0x14b53d=_0x814ade[_0x181431(0x18a)](0x0,_0x33ad0f),_0x48f470=_0x814ade[_0x181431(0x18a)](_0x33ad0f+0x1),_0x2cb6bb=parseInt(_0x48f470,0xa);if(!isNaN(_0x2cb6bb)&&_0x2cb6bb>0x0&&_0x2cb6bb<=0xffff){const _0x2513a0={};return _0x2513a0[_0x181431(0x144)]=_0x17acbf[_0x181431(0x1a1)],_0x2513a0['host']=_0x14b53d,_0x2513a0[_0x181431(0x152)]=_0x2cb6bb,_0x2513a0;}}const _0x38ceae={};return _0x38ceae['type']=_0x181431(0x166),_0x38ceae['host']=_0x814ade,_0x38ceae[_0x181431(0x152)]=0x1bb,_0x38ceae;}function isSpeedTestSite(_0x2fd1d1){const _0x4e8bbb=a0_0x539f,_0x4d3c72={};_0x4d3c72[_0x4e8bbb(0x1a2)]='S5\x20method\x20selection\x20failed',_0x4d3c72['WWRid']=_0x4e8bbb(0x168),_0x4d3c72['LOlIA']=_0x4e8bbb(0x151),_0x4d3c72['XtLcI']='speed.cloudflare.com',_0x4d3c72[_0x4e8bbb(0x114)]=function(_0x3057c0,_0x3fd410){return _0x3057c0+_0x3fd410;},_0x4d3c72[_0x4e8bbb(0x16b)]=function(_0x22fc30,_0x571b2d){return _0x22fc30===_0x571b2d;},_0x4d3c72[_0x4e8bbb(0x17c)]=function(_0x5977ef,_0x400aa1){return _0x5977ef!==_0x400aa1;},_0x4d3c72[_0x4e8bbb(0x11d)]=_0x4e8bbb(0x1af);const _0x453de0=_0x4d3c72,_0x2d1cd2=['speedtest.net',_0x453de0[_0x4e8bbb(0x10e)],_0x453de0['LOlIA'],_0x453de0['XtLcI'],'ovo.speedtestcustom.com'];if(_0x2d1cd2['includes'](_0x2fd1d1))return!![];for(const _0x555329 of _0x2d1cd2){if(_0x2fd1d1[_0x4e8bbb(0x154)](_0x453de0[_0x4e8bbb(0x114)]('.',_0x555329))||_0x453de0[_0x4e8bbb(0x16b)](_0x2fd1d1,_0x555329)){if(_0x453de0[_0x4e8bbb(0x17c)](_0x453de0['Nuxxr'],_0x453de0[_0x4e8bbb(0x11d)]))throw new _0x2b3597(_0x453de0['GjUbi']);else return!![];}}return![];}async function handleSSRequest(_0x272853,_0x11e8b9){const _0x5069d5=a0_0x539f,_0x2848d1={'RCgrY':function(_0x24df63,_0x4391e7,_0x5efd65,_0x5c9292){return _0x24df63(_0x4391e7,_0x5efd65,_0x5c9292);},'GUdwv':function(_0x3f37f8,_0x558e6d){return _0x3f37f8(_0x558e6d);},'RDKBf':_0x5069d5(0x1a8),'UtHdq':function(_0x2acc9e,_0xa878a4){return _0x2acc9e===_0xa878a4;},'acCWl':function(_0x2798d5,_0x264810,_0x3a1b16,_0x7265bd,_0xb47d89,_0x92e250,_0x4d7d8a,_0x5b7847){return _0x2798d5(_0x264810,_0x3a1b16,_0x7265bd,_0xb47d89,_0x92e250,_0x4d7d8a,_0x5b7847);},'vMmhx':function(_0x3797bd,_0x352b79,_0x5439e4){return _0x3797bd(_0x352b79,_0x5439e4);}},_0x3288c6=new WebSocketPair(),[_0x45c65b,_0x5542af]=Object[_0x5069d5(0x158)](_0x3288c6);_0x5542af[_0x5069d5(0x1a0)]();const _0x39d4d3={};_0x39d4d3[_0x5069d5(0x126)]=null;let _0x4961e6=_0x39d4d3,_0xf47242=![];const _0x3d8c0b=_0x272853[_0x5069d5(0x15d)][_0x5069d5(0x183)]('sec-websocket-protocol')||'',_0x5df9bf=_0x2848d1['vMmhx'](makeReadableStr,_0x5542af,_0x3d8c0b);_0x5df9bf['pipeTo'](new WritableStream({async 'write'(_0x5ecc98){const _0x4b58de=_0x5069d5;if(_0xf47242)return await _0x2848d1[_0x4b58de(0x17e)](forwardataudp,_0x5ecc98,_0x5542af,null);if(_0x4961e6[_0x4b58de(0x126)]){const _0x533518=_0x4961e6[_0x4b58de(0x126)][_0x4b58de(0x104)][_0x4b58de(0x196)]();await _0x533518['write'](_0x5ecc98),_0x533518[_0x4b58de(0x14e)]();return;}const {hasError:_0x84201d,message:_0x18bb39,addressType:_0xd9324,port:_0x19d207,hostname:_0x454f7e,rawIndex:_0xec02fa}=_0x2848d1['GUdwv'](parseSSPacketHeader,_0x5ecc98);if(_0x84201d)throw new Error(_0x18bb39);if(isSpeedTestSite(_0x454f7e))throw new Error(_0x2848d1[_0x4b58de(0x123)]);if(_0x2848d1[_0x4b58de(0x165)](_0xd9324,0x2)){if(_0x19d207===0x35)_0xf47242=!![];else throw new Error(_0x4b58de(0x19f));}const _0x14c3ed=_0x5ecc98[_0x4b58de(0x162)](_0xec02fa);if(_0xf47242)return forwardataudp(_0x14c3ed,_0x5542af,null);await _0x2848d1[_0x4b58de(0x186)](forwardataTCP,_0x454f7e,_0x19d207,_0x14c3ed,_0x5542af,null,_0x4961e6,_0x11e8b9);}}))[_0x5069d5(0x188)](_0x2e728f=>{});const _0x122c08={};return _0x122c08['status']=0x65,_0x122c08[_0x5069d5(0x161)]=_0x45c65b,new Response(null,_0x122c08);}function parseSSPacketHeader(_0x302148){const _0xc450e=a0_0x539f,_0x496cd7={};_0x496cd7[_0xc450e(0x169)]=_0xc450e(0x160),_0x496cd7['GLkks']=function(_0x7b1ba6,_0x426750){return _0x7b1ba6+_0x426750;},_0x496cd7[_0xc450e(0x189)]=function(_0x3f4a4a,_0x197399){return _0x3f4a4a+_0x197399;},_0x496cd7[_0xc450e(0x143)]=function(_0x1059f8,_0x4fb56c){return _0x1059f8<_0x4fb56c;},_0x496cd7[_0xc450e(0x12f)]=function(_0x55e9d6,_0x15697f){return _0x55e9d6*_0x15697f;},_0x496cd7[_0xc450e(0x164)]=function(_0x807107,_0x5e388f){return _0x807107+_0x5e388f;};const _0x4863ae=_0x496cd7,_0x3dc53b={};_0x3dc53b[_0xc450e(0x11f)]=!![],_0x3dc53b['message']=_0x4863ae[_0xc450e(0x169)];if(_0x302148['byteLength']<0x7)return _0x3dc53b;try{const _0x2b4ca5=new Uint8Array(_0x302148),_0x4d2b20=_0x2b4ca5[0x0];let _0x166a5=0x1,_0x57ab8b=0x0,_0x415b67=_0x166a5,_0x323b86='';switch(_0x4d2b20){case 0x1:_0x57ab8b=0x4,_0x323b86=new Uint8Array(_0x302148[_0xc450e(0x162)](_0x415b67,_0x415b67+_0x57ab8b))['join']('.'),_0x415b67+=_0x57ab8b;break;case 0x3:_0x57ab8b=_0x2b4ca5[_0x166a5],_0x415b67+=0x1,_0x323b86=new TextDecoder()[_0xc450e(0x107)](_0x302148[_0xc450e(0x162)](_0x415b67,_0x4863ae[_0xc450e(0x177)](_0x415b67,_0x57ab8b))),_0x415b67+=_0x57ab8b;break;case 0x4:_0x57ab8b=0x10;const _0x5ecac6=[],_0x2bcab7=new DataView(_0x302148[_0xc450e(0x162)](_0x415b67,_0x4863ae[_0xc450e(0x189)](_0x415b67,_0x57ab8b)));for(let _0x51b03c=0x0;_0x4863ae[_0xc450e(0x143)](_0x51b03c,0x8);_0x51b03c++)_0x5ecac6['push'](_0x2bcab7[_0xc450e(0x133)](_0x4863ae['WdQVu'](_0x51b03c,0x2))['toString'](0x10));_0x323b86=_0x5ecac6[_0xc450e(0x135)](':'),_0x415b67+=_0x57ab8b;break;default:const _0x5b6e1e={};_0x5b6e1e[_0xc450e(0x11f)]=!![],_0x5b6e1e['message']=_0xc450e(0x1a6)+_0x4d2b20;return _0x5b6e1e;}const _0x330df1={};_0x330df1[_0xc450e(0x11f)]=!![],_0x330df1[_0xc450e(0x174)]=_0xc450e(0x136)+_0x4d2b20;if(!_0x323b86)return _0x330df1;const _0x17fe41=new DataView(_0x302148[_0xc450e(0x162)](_0x415b67,_0x4863ae[_0xc450e(0x164)](_0x415b67,0x2)))['getUint16'](0x0),_0x28e044={};return _0x28e044[_0xc450e(0x11f)]=![],_0x28e044[_0xc450e(0x19c)]=_0x4d2b20,_0x28e044['port']=_0x17fe41,_0x28e044[_0xc450e(0x117)]=_0x323b86,_0x28e044['rawIndex']=_0x415b67+0x2,_0x28e044;}catch(_0x342f3a){const _0x48a475={};return _0x48a475['hasError']=!![],_0x48a475[_0xc450e(0x174)]=_0xc450e(0x18d),_0x48a475;}}async function connect2Socks5(_0xdf0de9,_0x5bea6e,_0x4e9d3a,_0x3b91a0){const _0x3a587f=a0_0x539f,_0x459603={'ZyYIO':function(_0x37d14e,_0x20f762){return _0x37d14e(_0x20f762);},'OYJyl':function(_0x143192,_0x18830c){return _0x143192&&_0x18830c;},'Ymqzj':function(_0x41bf07,_0x2b2a01){return _0x41bf07<_0x2b2a01;},'yEnYy':_0x3a587f(0x150),'qppeE':function(_0x33a32d,_0x2aa723){return _0x33a32d+_0x2aa723;},'JvaOQ':function(_0x3954c7,_0xa2f8b){return _0x3954c7!==_0xa2f8b;},'umElW':function(_0x121b5c,_0x2a918b){return _0x121b5c!==_0x2a918b;},'wXiZd':_0x3a587f(0x13f)},{host:_0x126509,port:_0x5d1273,username:_0x519ef5,password:password}=_0xdf0de9,_0x2a607b={};_0x2a607b[_0x3a587f(0x117)]=_0x126509,_0x2a607b['port']=_0x5d1273;const _0x193cdc=_0x459603[_0x3a587f(0x121)](connect,_0x2a607b),_0x49b5dd=_0x193cdc[_0x3a587f(0x104)][_0x3a587f(0x196)](),_0x3a0151=_0x193cdc[_0x3a587f(0x10d)][_0x3a587f(0x13e)]();try{const _0x3a73da=_0x459603[_0x3a587f(0x172)](_0x519ef5,password)?new Uint8Array([0x5,0x2,0x0,0x2]):new Uint8Array([0x5,0x1,0x0]);await _0x49b5dd['write'](_0x3a73da);const _0x58e5a4=await _0x3a0151['read']();if(_0x58e5a4[_0x3a587f(0x115)]||_0x459603[_0x3a587f(0x15f)](_0x58e5a4['value']['byteLength'],0x2))throw new Error(_0x3a587f(0x191));const _0x487c84=new Uint8Array(_0x58e5a4[_0x3a587f(0x11b)])[0x1];if(_0x487c84===0x2){if(!_0x519ef5||!password)throw new Error(_0x459603[_0x3a587f(0x12d)]);const _0x5d085e=new TextEncoder()[_0x3a587f(0x142)](_0x519ef5),_0x5c1141=new TextEncoder()[_0x3a587f(0x142)](password),_0x41887b=new Uint8Array(_0x459603[_0x3a587f(0x131)](0x3,_0x5d085e[_0x3a587f(0x192)])+_0x5c1141[_0x3a587f(0x192)]);_0x41887b[0x0]=0x1,_0x41887b[0x1]=_0x5d085e[_0x3a587f(0x192)],_0x41887b[_0x3a587f(0x18f)](_0x5d085e,0x2),_0x41887b[0x2+_0x5d085e[_0x3a587f(0x192)]]=_0x5c1141[_0x3a587f(0x192)],_0x41887b['set'](_0x5c1141,0x3+_0x5d085e[_0x3a587f(0x192)]),await _0x49b5dd['write'](_0x41887b);const _0x48f309=await _0x3a0151['read']();if(_0x48f309[_0x3a587f(0x115)]||_0x459603[_0x3a587f(0x184)](new Uint8Array(_0x48f309[_0x3a587f(0x11b)])[0x1],0x0))throw new Error(_0x3a587f(0x134));}else{if(_0x459603[_0x3a587f(0x11a)](_0x487c84,0x0))throw new Error('S5\x20unsupported\x20auth\x20method:\x20'+_0x487c84);}const _0x29c9da=new TextEncoder()[_0x3a587f(0x142)](_0x5bea6e),connectPacket=new Uint8Array(_0x459603[_0x3a587f(0x131)](0x7,_0x29c9da[_0x3a587f(0x192)]));connectPacket[0x0]=0x5,connectPacket[0x1]=0x1,connectPacket[0x2]=0x0,connectPacket[0x3]=0x3,connectPacket[0x4]=_0x29c9da[_0x3a587f(0x192)],connectPacket['set'](_0x29c9da,0x5),new DataView(connectPacket['buffer'])[_0x3a587f(0x127)](0x5+_0x29c9da[_0x3a587f(0x192)],_0x4e9d3a,![]),await _0x49b5dd[_0x3a587f(0x1a7)](connectPacket);const connectResponse=await _0x3a0151['read']();if(connectResponse['done']||new Uint8Array(connectResponse[_0x3a587f(0x11b)])[0x1]!==0x0)throw new Error(_0x459603[_0x3a587f(0x16d)]);return await _0x49b5dd['write'](_0x3b91a0),_0x49b5dd[_0x3a587f(0x14e)](),_0x3a0151[_0x3a587f(0x14e)](),_0x193cdc;}catch(_0x54d2ae){_0x49b5dd[_0x3a587f(0x14e)](),_0x3a0151['releaseLock']();throw _0x54d2ae;}}async function connect2Http(_0x3a2b71,_0x1dd3ed,_0x580a92,_0x2e006b){const _0x2b8172=a0_0x539f,_0x2dd93a={'wlPyb':_0x2b8172(0x13a),'NZBBO':function(_0x3b6589,_0xffd386){return _0x3b6589(_0xffd386);},'poudx':function(_0x1296f4,_0x421ac1){return _0x1296f4===_0x421ac1;},'KESio':function(_0x14d9b7,_0x4f0a39){return _0x14d9b7<_0x4f0a39;},'DzyAl':function(_0x2ed631,_0x455bcf){return _0x2ed631+_0x455bcf;},'lbzly':function(_0x2f113d,_0x1c4795){return _0x2f113d===_0x1c4795;},'aMEdZ':_0x2b8172(0x1a5),'KYcUJ':function(_0x2fa088,_0x31565d){return _0x2fa088>=_0x31565d;}},{host:_0x30c208,port:_0x489197,username:_0x1076cc,password:password}=_0x3a2b71,_0x55dacc={};_0x55dacc['hostname']=_0x30c208,_0x55dacc['port']=_0x489197;const _0x1d90d6=connect(_0x55dacc),_0x29e0d0=_0x1d90d6['writable']['getWriter'](),_0x5704c2=_0x1d90d6[_0x2b8172(0x10d)]['getReader']();try{let connectRequest=_0x2b8172(0x16a)+_0x1dd3ed+':'+_0x580a92+_0x2b8172(0x14b);connectRequest+=_0x2b8172(0x15c)+_0x1dd3ed+':'+_0x580a92+'\x0d\x0a';if(_0x1076cc&&password){if(_0x2dd93a['wlPyb']!==_0x2dd93a['wlPyb'])_0x478ea0[_0x2b8172(0x14e)]();else{const _0x5e9e96=_0x2dd93a['NZBBO'](btoa,_0x1076cc+':'+password);connectRequest+=_0x2b8172(0x176)+_0x5e9e96+'\x0d\x0a';}}connectRequest+=_0x2b8172(0x15b),connectRequest+=_0x2b8172(0x15e),connectRequest+='\x0d\x0a',await _0x29e0d0[_0x2b8172(0x1a7)](new TextEncoder()[_0x2b8172(0x142)](connectRequest));let _0x45f41b=new Uint8Array(0x0),_0x232038=-0x1,_0x2cee89=0x0;const _0x344685=0x2000;while(_0x2dd93a['poudx'](_0x232038,-0x1)&&_0x2dd93a[_0x2b8172(0x18b)](_0x2cee89,_0x344685)){const {done:_0x55a2a3,value:_0x22f046}=await _0x5704c2[_0x2b8172(0x155)]();if(_0x55a2a3)throw new Error(_0x2b8172(0x178));const _0x2bc259=new Uint8Array(_0x45f41b[_0x2b8172(0x192)]+_0x22f046[_0x2b8172(0x192)]);_0x2bc259[_0x2b8172(0x18f)](_0x45f41b),_0x2bc259[_0x2b8172(0x18f)](_0x22f046,_0x45f41b[_0x2b8172(0x192)]),_0x45f41b=_0x2bc259,_0x2cee89=_0x45f41b[_0x2b8172(0x192)];for(let _0x46f8c0=0x0;_0x46f8c0<_0x45f41b[_0x2b8172(0x192)]-0x3;_0x46f8c0++){if(_0x2dd93a['poudx'](_0x45f41b[_0x46f8c0],0xd)&&_0x45f41b[_0x46f8c0+0x1]===0xa&&_0x45f41b[_0x2dd93a[_0x2b8172(0x113)](_0x46f8c0,0x2)]===0xd&&_0x2dd93a[_0x2b8172(0x10a)](_0x45f41b[_0x2dd93a[_0x2b8172(0x113)](_0x46f8c0,0x3)],0xa)){_0x232038=_0x46f8c0+0x4;break;}}}if(_0x2dd93a['lbzly'](_0x232038,-0x1))throw new Error(_0x2dd93a[_0x2b8172(0x119)]);const _0x2b6be4=new TextDecoder()['decode'](_0x45f41b[_0x2b8172(0x162)](0x0,_0x232038)),_0x2d006c=_0x2b6be4[_0x2b8172(0x173)]('\x0d\x0a')[0x0],_0x39ae32=_0x2d006c[_0x2b8172(0x103)](/HTTP\/\d\.\d\s+(\d+)/);if(!_0x39ae32)throw new Error(_0x2b8172(0x17d)+_0x2d006c);const _0x46483e=_0x2dd93a[_0x2b8172(0x193)](parseInt,_0x39ae32[0x1]);if(_0x46483e<0xc8||_0x2dd93a[_0x2b8172(0x18c)](_0x46483e,0x12c))throw new Error(_0x2b8172(0x146)+_0x2d006c);return await _0x29e0d0[_0x2b8172(0x1a7)](_0x2e006b),_0x29e0d0[_0x2b8172(0x14e)](),_0x5704c2[_0x2b8172(0x14e)](),_0x1d90d6;}catch(_0x37a57f){try{_0x29e0d0['releaseLock']();}catch(_0x4b0825){}try{_0x5704c2[_0x2b8172(0x14e)]();}catch(_0x59dae5){}try{_0x1d90d6[_0x2b8172(0x105)]();}catch(_0x42e466){}throw _0x37a57f;}}function a0_0x539f(_0x4df8bc,_0x1cb2ab){_0x4df8bc=_0x4df8bc-0x103;const _0x409b49=a0_0x409b();let _0x539f1b=_0x409b49[_0x4df8bc];return _0x539f1b;}async function forwardataTCP(_0x5d0229,_0x24efca,_0x3929e3,_0x1654ec,_0x4a6794,_0x47dc64,_0x1e8868){const _0x327fc3=a0_0x539f,_0x299f01={'ZhKem':function(_0x7082c2,_0x5d2187,_0x2f4bae,_0xc26e88,_0x2664c7){return _0x7082c2(_0x5d2187,_0x2f4bae,_0xc26e88,_0x2664c7);},'wQeoY':function(_0x2e0cd9,_0x30ad28,_0x10c7c8,_0x582707,_0x3f927b){return _0x2e0cd9(_0x30ad28,_0x10c7c8,_0x582707,_0x3f927b);},'srxwm':function(_0x33f54b,_0x281f12){return _0x33f54b(_0x281f12);},'GAxrh':_0x327fc3(0x111),'aVvAR':function(_0x5b1bdf,_0x235452){return _0x5b1bdf===_0x235452;},'POZzO':'UIUbi','ITcno':function(_0x2ffd10,_0x585df4){return _0x2ffd10(_0x585df4);},'yURuu':_0x327fc3(0x125),'ANMNj':function(_0x1a0b62,_0x142175){return _0x1a0b62===_0x142175;},'kgriH':_0x327fc3(0x175),'lqVEZ':function(_0x2c5002){return _0x2c5002();}};async function connectDirect(_0x29b362,_0x43b23e,_0x2400e6){const _0x244459=_0x327fc3,_0x3db406={};_0x3db406[_0x244459(0x117)]=_0x29b362,_0x3db406['port']=_0x43b23e;const _0x4f896d=connect(_0x3db406),_0x148e3d=_0x4f896d[_0x244459(0x104)][_0x244459(0x196)]();return await _0x148e3d[_0x244459(0x1a7)](_0x2400e6),_0x148e3d[_0x244459(0x14e)](),_0x4f896d;}let _0x3bda63=null,_0x50850c=![];if(_0x1e8868){_0x3bda63=_0x299f01[_0x327fc3(0x18e)](parsePryAddress,_0x1e8868);if(_0x3bda63&&(_0x3bda63[_0x327fc3(0x144)]===_0x327fc3(0x125)||_0x3bda63[_0x327fc3(0x144)]===_0x327fc3(0x175)||_0x3bda63[_0x327fc3(0x144)]===_0x299f01[_0x327fc3(0x16f)]))_0x50850c=!![];else{if(!_0x3bda63){if(_0x299f01[_0x327fc3(0x122)](_0x299f01[_0x327fc3(0x153)],_0x299f01['POZzO']))_0x3bda63=_0x299f01[_0x327fc3(0x10c)](parsePryAddress,proxyIP)||{'type':_0x327fc3(0x166),'host':proxyIP,'port':0x1bb};else{proxyIP=_0x48541e;const _0x5f149d={};_0x5f149d[_0x327fc3(0x167)]=_0x327fc3(0x1ad),_0x5f149d[_0x327fc3(0x108)]=_0x327fc3(0x16e);const _0x399163={};return _0x399163[_0x327fc3(0x15d)]=_0x5f149d,new _0x2180a5('set\x20proxyIP\x20to:\x20'+proxyIP+'\x0a\x0a',_0x399163);}}}}else _0x3bda63=parsePryAddress(proxyIP)||{'type':_0x327fc3(0x166),'host':proxyIP,'port':0x1bb},(_0x3bda63['type']===_0x299f01[_0x327fc3(0x14d)]||_0x299f01[_0x327fc3(0x195)](_0x3bda63[_0x327fc3(0x144)],_0x299f01['kgriH'])||_0x299f01['ANMNj'](_0x3bda63[_0x327fc3(0x144)],_0x299f01['GAxrh']))&&(_0x50850c=!![]);async function connecttoPry(){const _0x1150e1=_0x327fc3;let _0xf6289;if(_0x3bda63[_0x1150e1(0x144)]===_0x1150e1(0x125))_0xf6289=await _0x299f01[_0x1150e1(0x19d)](connect2Socks5,_0x3bda63,_0x5d0229,_0x24efca,_0x3929e3);else _0x3bda63['type']===_0x1150e1(0x175)||_0x3bda63[_0x1150e1(0x144)]===_0x1150e1(0x111)?_0xf6289=await connect2Http(_0x3bda63,_0x5d0229,_0x24efca,_0x3929e3):_0xf6289=await connectDirect(_0x3bda63[_0x1150e1(0x124)],_0x3bda63['port'],_0x3929e3);_0x47dc64['socket']=_0xf6289,_0xf6289[_0x1150e1(0x128)][_0x1150e1(0x188)](()=>{})['finally'](()=>closeSocketQuietly(_0x1654ec)),_0x299f01[_0x1150e1(0x141)](connectStreams,_0xf6289,_0x1654ec,_0x4a6794,null);}if(_0x50850c)try{await _0x299f01['lqVEZ'](connecttoPry);}catch(_0x51fb26){throw _0x51fb26;}else try{const _0x336b7e=await connectDirect(_0x5d0229,_0x24efca,_0x3929e3);_0x47dc64[_0x327fc3(0x126)]=_0x336b7e,connectStreams(_0x336b7e,_0x1654ec,_0x4a6794,connecttoPry);}catch(_0x512354){await connecttoPry();}}function makeReadableStr(_0x36191b,_0x53fa5a){const _0x2423d3=a0_0x539f,_0x42069d={'cxxBU':function(_0x4927f6,_0x50e697){return _0x4927f6(_0x50e697);},'UagdW':_0x2423d3(0x105),'IHUPs':_0x2423d3(0x194)};let _0x4b961e=![];return new ReadableStream({'start'(_0x543dd6){const _0x540976=_0x2423d3;_0x36191b['addEventListener']('message',_0x5625f4=>{const _0x25c5e4=a0_0x539f;if(!_0x4b961e)_0x543dd6[_0x25c5e4(0x140)](_0x5625f4[_0x25c5e4(0x15a)]);}),_0x36191b['addEventListener'](_0x42069d[_0x540976(0x106)],()=>{const _0x1cfa87=_0x540976;!_0x4b961e&&(_0x42069d['cxxBU'](closeSocketQuietly,_0x36191b),_0x543dd6[_0x1cfa87(0x105)]());}),_0x36191b[_0x540976(0x132)](_0x42069d['IHUPs'],_0x59e2a3=>_0x543dd6[_0x540976(0x194)](_0x59e2a3));const {earlyData:_0x49689e,error:_0x5451de}=base64ToArray(_0x53fa5a);if(_0x5451de)_0x543dd6['error'](_0x5451de);else{if(_0x49689e)_0x543dd6['enqueue'](_0x49689e);}},'cancel'(){_0x4b961e=!![],closeSocketQuietly(_0x36191b);}});}async function connectStreams(_0x3cd67d,_0x4620ce,_0x10cc37,_0x121cdb){const _0x30d2f1=a0_0x539f,_0x27a3bb={'kNwBI':function(_0x26f055,_0x3b8c84){return _0x26f055!==_0x3b8c84;},'mKhVv':_0x30d2f1(0x1ab),'pNFrV':function(_0x368f4c,_0x3f6cf6){return _0x368f4c&&_0x3f6cf6;},'uLflN':function(_0x53ebb0){return _0x53ebb0();}};let _0x487362=_0x10cc37,_0x2dfc83=![];await _0x3cd67d[_0x30d2f1(0x10d)][_0x30d2f1(0x110)](new WritableStream({async 'write'(_0x4c6b4e,_0xe27976){const _0x481d0d=_0x30d2f1;_0x2dfc83=!![];if(_0x27a3bb['kNwBI'](_0x4620ce['readyState'],WebSocket[_0x481d0d(0x182)]))_0xe27976[_0x481d0d(0x194)](_0x27a3bb[_0x481d0d(0x16c)]);if(_0x487362){const _0x4814b0=new Uint8Array(_0x487362[_0x481d0d(0x192)]+_0x4c6b4e[_0x481d0d(0x112)]);_0x4814b0['set'](_0x487362,0x0),_0x4814b0[_0x481d0d(0x18f)](_0x4c6b4e,_0x487362[_0x481d0d(0x192)]),_0x4620ce[_0x481d0d(0x13d)](_0x4814b0['buffer']),_0x487362=null;}else _0x4620ce[_0x481d0d(0x13d)](_0x4c6b4e);},'abort'(){}}))['catch'](_0x5a849d=>{closeSocketQuietly(_0x4620ce);}),_0x27a3bb[_0x30d2f1(0x14a)](!_0x2dfc83,_0x121cdb)&&await _0x27a3bb[_0x30d2f1(0x149)](_0x121cdb);}function a0_0x409b(){const _0x5d331d=['UDP\x20is\x20not\x20supported','accept','xHHez','GjUbi','1445118OtmomF','FlJLO','Invalid\x20HTTP\x20response','Invalid\x20address\x20type:\x20','write','Speedtest\x20site\x20is\x20blocked','Internal\x20Server\x20Error','https://','wsreadyState\x20not\x20open','wlIii','text/plain;\x20charset=utf-8','trim','XhtCz','match','writable','close','UagdW','decode','Cache-Control','RFoyK','lbzly','set\x20proxyIP\x20to:\x20','ITcno','readable','WWRid','Upgrade','pipeTo','https','byteLength','DzyAl','jtpgP','done','IpVbO','hostname','pdkRB','aMEdZ','umElW','value','readyState','Nuxxr','3620930lxpdGW','hasError','vaEfm','ZyYIO','aVvAR','RDKBf','host','socks5','socket','setUint16','closed','toLowerCase','47IlwgBE','username','url','yEnYy','yZror','WdQVu','CLOSING','qppeE','addEventListener','getUint16','S5\x20authentication\x20failed','join','Invalid\x20address:\x20','buffer','rgDSK','jRJUm','sPtRj','proxyip','23890npNrKD','send','getReader','S5\x20connection\x20failed','enqueue','wQeoY','encode','gqFYi','type','lastIndexOf','Connection\x20failed:\x20','/proxyip=','5393773yrLTNI','uLflN','pNFrV','\x20HTTP/1.1\x0d\x0a','startsWith','yURuu','releaseLock','searchParams','S5\x20requires\x20authentication','speedtest.cn','port','POZzO','endsWith','read','indexOf','Unauthorized','values','6824vhwePq','data','User-Agent:\x20Mozilla/5.0\x0d\x0a','Host:\x20','headers','Connection:\x20keep-alive\x0d\x0a','Ymqzj','Invalid\x20data','webSocket','slice','replace','qYuLB','UtHdq','direct','Content-Type','fast.com','dfgBA','CONNECT\x20','vaoTI','mKhVv','wXiZd','no-store,\x20no-cache,\x20must-revalidate,\x20max-age=0','GAxrh','MyEId','1162100legOAg','OYJyl','split','message','http','Proxy-Authorization:\x20Basic\x20','GLkks','Connection\x20closed\x20before\x20receiving\x20HTTP\x20response','8.8.4.4','status','socks5://','yqKUB','Invalid\x20response:\x20','RCgrY','mBIAd','16461iVGutj','437154Hbccsi','OPEN','get','JvaOQ','HOJGW','acCWl','hVEez','catch','UQQvE','substring','KESio','KYcUJ','Failed\x20to\x20parse\x20SS\x20packet\x20header','srxwm','set','FnBsX','S5\x20method\x20selection\x20failed','length','NZBBO','error','ANMNj','getWriter','none','Worker\x20is\x20running','http://','wLyap','password','addressType','ZhKem','qgOiv'];a0_0x409b=function(){return _0x5d331d;};return a0_0x409b();}async function forwardataudp(_0x173184,_0x520e67,_0xac7e61){const _0x3e06e3=a0_0x539f,_0x356f63={'FlJLO':function(_0x43bc5c,_0x592146){return _0x43bc5c===_0x592146;},'lBUsa':function(_0x18c09d,_0x4b52cb){return _0x18c09d+_0x4b52cb;},'CkYct':function(_0x117c24,_0x532c60){return _0x117c24(_0x532c60);},'qgOiv':_0x3e06e3(0x179)};try{const _0x484226=_0x356f63['CkYct'](connect,{'hostname':_0x356f63[_0x3e06e3(0x19e)],'port':0x35});let _0x4d4f33=_0xac7e61;const _0x1d5e22=_0x484226[_0x3e06e3(0x104)][_0x3e06e3(0x196)]();await _0x1d5e22[_0x3e06e3(0x1a7)](_0x173184),_0x1d5e22[_0x3e06e3(0x14e)](),await _0x484226[_0x3e06e3(0x10d)][_0x3e06e3(0x110)](new WritableStream({async 'write'(_0x1ea37e){const _0x12f92b=_0x3e06e3;if(_0x356f63[_0x12f92b(0x1a4)](_0x520e67[_0x12f92b(0x11c)],WebSocket[_0x12f92b(0x182)])){if(_0x4d4f33){const _0x289396=new Uint8Array(_0x356f63['lBUsa'](_0x4d4f33['length'],_0x1ea37e['byteLength']));_0x289396[_0x12f92b(0x18f)](_0x4d4f33,0x0),_0x289396[_0x12f92b(0x18f)](_0x1ea37e,_0x4d4f33[_0x12f92b(0x192)]),_0x520e67[_0x12f92b(0x13d)](_0x289396[_0x12f92b(0x137)]),_0x4d4f33=null;}else _0x520e67[_0x12f92b(0x13d)](_0x1ea37e);}}}));}catch(_0x267f36){}}export default{async 'fetch'(_0x39df89,_0x5038e2){const _0x1fdcb8=a0_0x539f,_0x3eae73={'mBIAd':function(_0x54f984,_0x310055){return _0x54f984===_0x310055;},'jRJUm':'websocket','HOJGW':function(_0x312977,_0x25ac71){return _0x312977(_0x25ac71);},'IpVbO':_0x1fdcb8(0x13b),'vaEfm':function(_0x29bea5,_0x443ff8,_0x3a359a){return _0x29bea5(_0x443ff8,_0x3a359a);},'VFMlz':_0x1fdcb8(0x198)};try{_0x3eae73[_0x1fdcb8(0x17f)](SSpath,'')&&(SSpath=password);let _0x52851b='/'+SSpath;const _0x465448=proxyIP['split'](',')['map'](_0x18cd42=>_0x18cd42[_0x1fdcb8(0x1ae)]());proxyIP=_0x465448[0x0];const _0x2108f1=_0x1fdcb8(0x197),_0x48d4ef=new URL(_0x39df89[_0x1fdcb8(0x12c)]),_0x1d336f=_0x48d4ef['pathname'];let _0x37e21f=null;if(_0x1d336f[_0x1fdcb8(0x14c)](_0x1fdcb8(0x147))){try{_0x37e21f=decodeURIComponent(_0x1d336f[_0x1fdcb8(0x18a)](0x9))[_0x1fdcb8(0x1ae)]();}catch(_0x5a28e6){}if(_0x37e21f&&!_0x39df89['headers']['get'](_0x1fdcb8(0x10f))){proxyIP=_0x37e21f;const _0x39a4cc={};_0x39a4cc[_0x1fdcb8(0x167)]='text/plain;\x20charset=utf-8',_0x39a4cc[_0x1fdcb8(0x108)]=_0x1fdcb8(0x16e);const _0x349e6e={};return _0x349e6e[_0x1fdcb8(0x15d)]=_0x39a4cc,new Response(_0x1fdcb8(0x10b)+proxyIP+'\x0a\x0a',_0x349e6e);}}if(_0x39df89[_0x1fdcb8(0x15d)][_0x1fdcb8(0x183)](_0x1fdcb8(0x10f))===_0x3eae73[_0x1fdcb8(0x139)]){if(!_0x1d336f[_0x1fdcb8(0x129)]()[_0x1fdcb8(0x14c)](_0x52851b[_0x1fdcb8(0x129)]())){const _0x3a1e43={};return _0x3a1e43[_0x1fdcb8(0x17a)]=0x191,new Response(_0x1fdcb8(0x157),_0x3a1e43);}let _0x599f9d=null;if(_0x1d336f['startsWith'](_0x1fdcb8(0x147)))try{_0x599f9d=_0x3eae73[_0x1fdcb8(0x185)](decodeURIComponent,_0x1d336f['substring'](0x9))['trim']();}catch(_0x453e65){}const _0x32fe82=_0x599f9d||_0x48d4ef[_0x1fdcb8(0x14f)][_0x1fdcb8(0x183)](_0x1fdcb8(0x13b))||_0x39df89[_0x1fdcb8(0x15d)]['get'](_0x3eae73[_0x1fdcb8(0x116)]);return await _0x3eae73[_0x1fdcb8(0x120)](handleSSRequest,_0x39df89,_0x32fe82);}const _0x5ee4fa={};return _0x5ee4fa[_0x1fdcb8(0x17a)]=0xc8,new Response(_0x3eae73['VFMlz'],_0x5ee4fa);}catch(_0xe482f7){const _0x15751e={};return _0x15751e['status']=0x1f4,new Response(_0x1fdcb8(0x1a9),_0x15751e);}}};